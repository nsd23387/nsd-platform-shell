# =============================================================================
# M67.9-01: VERCEL HOSTING ENVIRONMENT VARIABLES
# =============================================================================
# 
# This deployment is READ-ONLY. No API connections, no execution, no data modifications.
# Runtime wiring occurs in M68, not here.
#
# SECURITY NOTE:
# Access control is handled via HTTP Basic Auth middleware (server-side only).
# No application-level authentication is implemented.
# Credentials are never exposed to the browser.
# =============================================================================

# -----------------------------------------------------------------------------
# INTERNAL ACCESS CONTROL (OPTIONAL - HTTP Basic Auth)
# -----------------------------------------------------------------------------
# If both are set, all routes require Basic Auth (except static assets).
# If either is missing, auth is disabled (fail-open for dev safety).
# These are SERVER-SIDE ONLY - never exposed to browser.

# Username for HTTP Basic Auth (leave blank to disable)
BASIC_AUTH_USERNAME=

# Password for HTTP Basic Auth (leave blank to disable)
BASIC_AUTH_PASSWORD=

# -----------------------------------------------------------------------------
# DEPLOYMENT MODE FLAGS (REQUIRED FOR VERCEL)
# -----------------------------------------------------------------------------

# Set to 'disabled' to short-circuit all API calls and return mock data
# This is REQUIRED for Vercel deployment in M67.9-01
NEXT_PUBLIC_API_MODE=disabled

# Set to 'true' to enable read-only mode (disables all execution buttons)
# This is REQUIRED for Vercel deployment in M67.9-01
NEXT_PUBLIC_READ_ONLY=true

# -----------------------------------------------------------------------------
# M68-02: RUNTIME GATING (PREVIEW ONLY)
# -----------------------------------------------------------------------------
# Runtime execution is ONLY permitted when ALL of the following are true:
# - NEXT_PUBLIC_RUNTIME_ENABLED=true
# - NEXT_PUBLIC_READ_ONLY!=true
# - NEXT_PUBLIC_API_MODE!=disabled
# - NEXT_PUBLIC_RUNTIME_KILL_SWITCH!=true (M68-03)
#
# Production MUST keep READ_ONLY=true and API_MODE=disabled.
# This flag is for Preview environments ONLY.

# Set to 'true' to enable runtime permission in Preview environments
# WARNING: Do NOT set this in production
NEXT_PUBLIC_RUNTIME_ENABLED=false

# -----------------------------------------------------------------------------
# M68-03: RUNTIME KILL SWITCH (EMERGENCY USE)
# -----------------------------------------------------------------------------
# Global kill switch that overrides ALL other runtime conditions.
# When set to 'true':
# - canRuntimeExecute() returns false regardless of other flags
# - Confirmation modal cannot proceed
# - UI shows "Runtime disabled by kill switch"
#
# Use this to immediately disable all runtime actions in an emergency.

# Set to 'true' to disable ALL runtime actions immediately
NEXT_PUBLIC_RUNTIME_KILL_SWITCH=false

# -----------------------------------------------------------------------------
# PLACEHOLDER VALUES (REQUIRED FOR BUILD - NOT USED WHEN API MODE DISABLED)
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# SUPABASE CONFIGURATION (REQUIRED FOR CAMPAIGN PERSISTENCE)
# -----------------------------------------------------------------------------

# Supabase project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase anon key (for client-side read operations)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Supabase service role key (SERVER-SIDE ONLY - for campaign creation)
# This key bypasses RLS and is required for writing to core.campaigns
# NEVER expose this to the client
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# -----------------------------------------------------------------------------
# ACTIVITY SPINE API CONFIGURATION (OPTIONAL)
# -----------------------------------------------------------------------------

# Activity Spine API URL (required for runtime, not used when API disabled)
NEXT_PUBLIC_ACTIVITY_SPINE_URL=/api/activity-spine

# Activity Spine backend URL (for API proxy in development)
ACTIVITY_SPINE_API_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# SALES ENGINE API CONFIGURATION (OPTIONAL)
# -----------------------------------------------------------------------------

# Sales Engine M60 API base URL (client-side) - for UI API calls
NEXT_PUBLIC_SALES_ENGINE_API_BASE_URL=/api/v1/campaigns

# -----------------------------------------------------------------------------
# SALES ENGINE EXECUTION CONFIGURATION (SERVER-SIDE ONLY)
# -----------------------------------------------------------------------------
# These are used by:
# 1. /api/execute-campaign proxy to forward requests server-to-server
# 2. /api/execution-status to validate execution contract at startup
# 3. /api/campaigns/:id/runs/latest to fetch latest run status
#
# SALES_ENGINE_URL (required): Base URL of nsd-sales-engine
#   Example: https://nsd-sales-engine.vercel.app
#
# SALES_ENGINE_API_BASE_URL (optional): API path prefix for execution endpoint
#   Default: /api/v1/campaigns
#   The proxy constructs: ${SALES_ENGINE_URL}${SALES_ENGINE_API_BASE_URL}/${campaignId}/start
#   If this path returns 404, proxy tries fallback: ${SALES_ENGINE_URL}/api/campaigns/${campaignId}/start
#
# EXECUTION CONTRACT VALIDATION (Part D):
# On first request to /api/execution-status, platform-shell calls:
#   GET ${SALES_ENGINE_URL}/api/meta/routes
# And validates the execution contract (queue-first mode, enqueue endpoint).
# If validation fails, all "Run Campaign" buttons are disabled with a tooltip:
#   "Execution unavailable â€” Sales Engine execution contract not detected."
#
# LATEST RUN STATUS (Part E):
# GET /api/campaigns/:id/runs/latest proxies to:
#   GET ${SALES_ENGINE_URL}/api/v1/campaigns/:id/runs/latest
# Returns 200 (run data), 204 (no runs), 404 (campaign not found), or 5xx (service unavailable).
#
# IMPORTANT:
# - platform-shell NEVER executes campaigns locally
# - The proxy preserves status codes and payloads from sales-engine
# - Timeout is 15 seconds for execution, 10 seconds for read operations
#
SALES_ENGINE_URL=https://nsd-sales-engine.vercel.app
SALES_ENGINE_API_BASE_URL=/api/v1/campaigns

# ODS API URL for bootstrap/identity
NEXT_PUBLIC_ODS_API_URL=/functions/v1/ods-api

# -----------------------------------------------------------------------------
# NOTES
# -----------------------------------------------------------------------------
# 
# HARD CONSTRAINTS (M67.9-01):
# - READ-ONLY ONLY. No writes. No mutations. No pipeline execution.
# - No Supabase, Smartlead, Apollo, Make, or backend service connections.
# - No secrets or real API keys.
# - All network calls disabled when API mode is disabled.
# - This milestone is hosting-only - does NOT enable M68 functionality.
#
# The shell does NOT:
# - Perform CRUD operations (except M67-14 campaign creation when enabled)
# - Compute metrics locally
# - Access databases directly
# - Bypass the Activity Spine SDK
