Replit Master Prompt ‚Äî M67

Sales Engine UI Implementation (M67-02 ‚Üí M67-05)
Repo: nsd-platform-shell
Status: M67-01 APPROVED (Contract v1.1)
Audience: Replit UI Engineers
Authority: UI-only, governance-first, no execution authority

0. Read This First (NON-NEGOTIABLE)

You are implementing the Sales Engine UI governed by:

Sales Engine UI Architecture Contract v1.1

M60 UI-Facing API Surface (Campaigns only)

This UI:

‚ùå Has NO execution authority

‚ùå Has NO approval authority

‚ùå Has NO lifecycle authority

‚úÖ Renders server truth only

‚úÖ Uses governance metadata returned by APIs

‚úÖ Is declarative, thin, and read-only where required

If something is not explicitly allowed below, it is forbidden.

1. Allowed API Surface (ONLY)
Base Namespace
/api/v1/campaigns

READ (8 endpoints)
GET /api/v1/campaigns
GET /api/v1/campaigns/:id
GET /api/v1/campaigns/:id/metrics
GET /api/v1/campaigns/:id/metrics/history
GET /api/v1/campaigns/:id/runs
GET /api/v1/campaigns/:id/runs/latest
GET /api/v1/campaigns/:id/variants
GET /api/v1/campaigns/:id/throughput

WRITE (4 endpoints)
POST  /api/v1/campaigns
PATCH /api/v1/campaigns/:id
POST  /api/v1/campaigns/:id/submit
POST  /api/v1/campaigns/:id/approve


üö´ NO EXECUTE ENDPOINTS EXIST
üö´ /execute, /run, /trigger, /schedule MUST NOT be implemented
üö´ Legacy /api/campaigns/* (non-versioned) MUST NOT be used

2. Governance Metadata (MANDATORY)

From:

GET /api/v1/campaigns/:id


The API returns authoritative governance flags:

Flag	Meaning	UI Behavior
canEdit	Campaign editable	Enable inputs
canSubmit	Can submit	Show submit button
canApprove	Can approve	Show approval UI (M67-03 only)
isRunnable	Runnable	Display status only

üö´ UI must NOT compute
üö´ UI must NOT override
üö´ UI must NOT infer lifecycle

3. Campaign Lifecycle (Server-Controlled)
DRAFT ‚Üí PENDING_REVIEW ‚Üí RUNNABLE ‚Üí ARCHIVED


UI rules:

DRAFT ‚Üí editable

All others ‚Üí read-only

UI cannot transition lifecycle except via allowed endpoints

4. M67-02 ‚Äî Campaign Setup UI (DRAFT only)
Deliverables

Campaign list view

Campaign create flow

Campaign edit view (DRAFT only)

Submit-for-review action

Key Rules

Campaigns are always created as DRAFT

Status is never editable

‚ÄúSubmit‚Äù button shown only if canSubmit === true

After submit ‚Üí UI becomes read-only

5. M67-03 ‚Äî Campaign Approval UI (Human Approval)
Deliverables

Approval UI for PENDING_REVIEW campaigns

Explicit confirmation before approval

API
POST /api/v1/campaigns/:id/approve

Rules

Show approval affordance ONLY if canApprove === true

No bulk approvals

No auto-approval

Approval is a WRITE lifecycle transition, not execution

6. M67-04 ‚Äî Campaign Execution UI (Trigger Only)

‚ö†Ô∏è IMPORTANT: This UI does NOT execute anything.

Deliverables

Explicit ‚ÄúStart Execution‚Äù affordance

Safety confirmation UI

Display readiness / blocking reasons

Rules

UI does NOT call execution APIs (none exist)

UI displays readiness state only

Actual execution happens outside UI scope

7. M67-05 ‚Äî Campaign Monitoring UI (Read-Only)
Deliverables

Metrics snapshot view

Metrics history view

Run summaries view

Throughput visibility

APIs Used
GET /metrics
GET /metrics/history
GET /runs
GET /runs/latest
GET /throughput

Rules

Runs are immutable

No edits, retries, or mutations

Display only

8. Safety & Readiness (Display Only)

UI must surface (but not compute):

M65 Blocking Reasons

MISSING_HUMAN_APPROVAL

PERSISTENCE_ERRORS

NO_LEADS_PERSISTED

KILL_SWITCH_ENABLED

SMARTLEAD_NOT_CONFIGURED

INSUFFICIENT_CREDITS

Throughput Block Reasons

DAILY_LIMIT_EXCEEDED

HOURLY_LIMIT_EXCEEDED

MAILBOX_LIMIT_EXCEEDED

CONFIG_INACTIVE

NO_CONFIG_FOUND

9. Explicitly Forbidden (FAIL REVIEW IF FOUND)

‚ùå Any ‚Äúquotes‚Äù references

‚ùå Supabase client usage

‚ùå Service role keys

‚ùå Direct DB access

‚ùå Orchestration logic

‚ùå Business rules in UI

‚ùå AI logic

‚ùå Background jobs

‚ùå Lifecycle inference

‚ùå Execution logic

10. Deliverables for ALL of M67

Replit must provide:

UI covering M67-02 ‚Üí M67-05

UAT screenshots for each lifecycle state

Confirmation of API usage compliance

Confirmation no forbidden patterns were used

11. Definition of Done (Global)

M67 is complete when:

UI only uses /api/v1/campaigns/*

All governance flags are respected

No execute logic exists

UI is read-only where required

Manual review passes

No exceptions requested

Final Instruction

This UI is governance-first.
If something feels powerful, it is probably forbidden.
Ask before implementing.