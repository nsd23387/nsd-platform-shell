üö¶ M67 ‚Äî Sales Engine UI Pull Request

Repo: nsd-platform-shell
Milestone(s): ‚òê M67-02 ‚òê M67-03 ‚òê M67-04 ‚òê M67-05
Contract: docs/SALES_ENGINE_UI_ARCHITECTURE_CONTRACT.md v1.1
Alignment Status: ‚òê Verified against M60 extract (2024-12-30)

1. Summary

What does this PR implement?
(Brief, factual summary. No architecture justification here.)

 Campaign Setup UI (DRAFT only)

 Campaign Approval UI

 Campaign Execution Readiness UI (display only)

 Campaign Monitoring UI (metrics, runs, throughput)

2. Contract Scope Confirmation (REQUIRED)

Confirm this PR implements Sales Engine campaigns UI only.

 No Quote Management UI

 No OMS / Order / Inbound UX

 No pricing, quoting, or items domain

 All UI interactions are campaign-scoped

‚ùå FAIL if any quote-related logic exists

3. Allowed API Surface (M60-ONLY)
‚úÖ Read APIs Used

Check all that apply:

 GET /api/v1/campaigns

 GET /api/v1/campaigns/:id

 GET /api/v1/campaigns/:id/metrics

 GET /api/v1/campaigns/:id/metrics/history

 GET /api/v1/campaigns/:id/runs

 GET /api/v1/campaigns/:id/runs/latest

 GET /api/v1/campaigns/:id/variants

 GET /api/v1/campaigns/:id/throughput

‚úÖ Write APIs Used (Lifecycle Only)

 POST /api/v1/campaigns

 PATCH /api/v1/campaigns/:id (DRAFT only)

 POST /api/v1/campaigns/:id/submit

 POST /api/v1/campaigns/:id/approve

4. üö´ Forbidden API Confirmation (MANDATORY)

Confirm none of the following exist in this PR:

 /api/campaigns/* (non-versioned)

 /execute, /run, /trigger, /schedule

 Run mutation endpoints

 Quote-based endpoints

 Edge Function calls

 Supabase client imports

 Service role keys

‚ùå FAIL if any forbidden call exists

5. Governance Metadata Enforcement

From GET /api/v1/campaigns/:id, the UI:

 Consumes canEdit

 Consumes canSubmit

 Consumes canApprove

 Consumes isRunnable

 Does not infer or override these values

 Enables/disables UI actions strictly from these flags

6. Lifecycle Enforcement (Server-Controlled)

Lifecycle implemented:

DRAFT ‚Üí PENDING_REVIEW ‚Üí RUNNABLE ‚Üí ARCHIVED


 DRAFT is editable

 PENDING_REVIEW is read-only

 RUNNABLE is read-only

 ARCHIVED is read-only

 UI does not mutate status directly

 Only /submit and /approve trigger transitions

7. Execution Safety (CRITICAL)

 UI does not trigger execution

 UI does not imply execution can occur

 UI clearly communicates: ‚ÄúReadiness ‚â† Execution‚Äù

 UI only displays readiness + blocking reasons

‚ùå IMMEDIATE BLOCKER if violated

8. Blocking & Throughput Reasons (Display-Only)
M65 Blocking Reasons Displayed

 MISSING_HUMAN_APPROVAL

 PERSISTENCE_ERRORS

 NO_LEADS_PERSISTED

 KILL_SWITCH_ENABLED

 SMARTLEAD_NOT_CONFIGURED

 INSUFFICIENT_CREDITS

Throughput Blocking Reasons Displayed

 DAILY_LIMIT_EXCEEDED

 HOURLY_LIMIT_EXCEEDED

 MAILBOX_LIMIT_EXCEEDED

 CONFIG_INACTIVE

 NO_CONFIG_FOUND

9. Evidence (REQUIRED FOR REVIEW)

Attach screenshots or recordings showing:

 DRAFT campaign editable

 PENDING_REVIEW campaign read-only

 RUNNABLE campaign read-only

 Submit button gated by canSubmit

 Approve button gated by canApprove

 Monitoring UI is read-only

10. Reviewer Checklist (Architecture Gate)

Reviewer must confirm:

 Contract v1.1 followed exactly

 No speculative APIs introduced

 No authority creep in UI

 No execution or orchestration logic

 No legacy endpoint usage

11. Final Decision

‚òê APPROVE ‚Äî Safe to merge

‚òê REQUEST CHANGES ‚Äî Violations found

‚òê BLOCK ‚Äî Contract breach

Reviewer Notes (Required if not APPROVE):

üö® Reminder

This UI is governance-critical infrastructure.
Passing this PR means:

No new authority was added

No execution paths were introduced

M60 / M65 / M66 guarantees remain intact